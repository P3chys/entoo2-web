@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	* {
		@apply border-light-border-primary dark:border-dark-border-primary;
	}

	html {
		@apply bg-light-bg-primary dark:bg-dark-bg-primary;
		@apply text-light-text-primary dark:text-dark-text-primary;
	}

	body {
		@apply antialiased;
		user-select: none;
		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		cursor: default;
	}

	/* Allow text selection only in input elements and editable content */
	input,
	textarea,
	[contenteditable="true"],
	pre,
	code {
		user-select: text;
		-webkit-user-select: text;
		-moz-user-select: text;
		-ms-user-select: text;
		cursor: text;
	}

	/* Smooth theme transitions for all elements */
	*,
	*::before,
	*::after {
		transition-property: background-color, border-color, color, fill, stroke, box-shadow, opacity;
		transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
		transition-duration: 0.5s;
	}

	/* Faster transitions for interactive elements */
	button,
	a,
	input,
	select,
	textarea {
		transition-duration: 0.3s;
	}

	h1 {
		@apply text-3xl font-bold;
	}

	h2 {
		@apply text-2xl font-semibold;
	}

	h3 {
		@apply text-xl font-semibold;
	}

	h4 {
		@apply text-lg font-medium;
	}

	a {
		@apply text-accent-primary hover:text-accent-hover transition-colors;
	}

	/* Improved focus styles using focus-visible */
	*:focus-visible {
		@apply outline-2 outline-offset-2 outline-accent-primary ring-2 ring-accent-primary;
	}
}

@layer components {
	/* Skip link for accessibility */
	.skip-link {
		@apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4;
		@apply z-50 px-4 py-2 bg-accent-primary text-white rounded-lg;
		@apply font-medium shadow-lg;
	}

	.btn {
		@apply px-4 py-2 rounded-lg font-medium transition-all duration-200;
		@apply focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary focus-visible:ring-offset-2;
		@apply dark:focus-visible:ring-offset-dark-bg-primary;
		@apply disabled:opacity-50 disabled:cursor-not-allowed;
	}

	.btn-primary {
		@apply bg-accent-primary text-white hover:bg-accent-hover;
		@apply active:scale-95;
	}

	.btn-secondary {
		@apply bg-light-bg-tertiary dark:bg-dark-bg-tertiary;
		@apply text-light-text-primary dark:text-dark-text-primary;
		@apply hover:bg-light-bg-hover dark:hover:bg-dark-bg-hover;
		@apply active:scale-95;
	}

	.btn-ghost {
		@apply bg-transparent hover:bg-light-bg-hover dark:hover:bg-dark-bg-hover;
		@apply text-light-text-primary dark:text-dark-text-primary;
		@apply active:scale-95;
	}

	.btn-danger {
		@apply bg-error text-white hover:bg-error/90;
		@apply active:scale-95;
	}

	.input {
		@apply w-full px-4 py-2 rounded-lg border;
		@apply bg-light-bg-primary dark:bg-dark-bg-secondary;
		@apply text-light-text-primary dark:text-dark-text-primary;
		@apply border-light-border-primary dark:border-dark-border-primary;
		@apply focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary;
		@apply transition-all duration-200;
	}

	.card {
		@apply bg-light-bg-secondary dark:bg-dark-bg-secondary;
		@apply border border-light-border-primary dark:border-dark-border-primary;
		@apply rounded-lg p-6;
		@apply shadow-sm hover:shadow-md transition-all duration-200;
		@apply hover:border-accent-primary/30 cursor-pointer;
	}

	.card-interactive {
		@apply card;
		@apply hover:scale-[1.01] active:scale-[0.99];
	}

	.link {
		@apply text-accent-primary hover:text-accent-hover;
		@apply hover:underline transition-colors;
	}

	/* Hero section styling */
	.hero {
		@apply relative overflow-hidden;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		@apply text-white py-12 px-6 rounded-xl;
	}

	/* Stats bar styling */
	.stats-bar {
		@apply flex flex-wrap gap-6 items-center justify-between;
		@apply py-4 px-6 rounded-lg;
		@apply bg-light-bg-secondary dark:bg-dark-bg-secondary;
		@apply border border-light-border-primary dark:border-dark-border-primary;
	}

	.stat-item {
		@apply flex flex-col items-center gap-1;
	}

	.stat-value {
		@apply text-3xl font-bold text-accent-primary;
	}

	.stat-label {
		@apply text-sm text-light-text-secondary dark:text-dark-text-secondary;
	}

	/* Empty state styling */
	.empty-state {
		@apply text-center py-12 px-6;
		@apply max-w-md mx-auto;
	}

	.empty-icon {
		@apply w-24 h-24 mx-auto mb-4;
		@apply text-light-text-tertiary dark:text-dark-text-tertiary;
		@apply opacity-0 animate-fade-in;
	}

	.empty-title {
		@apply text-2xl font-semibold mb-3;
		@apply text-light-text-primary dark:text-dark-text-primary;
	}

	.empty-description {
		@apply text-base text-light-text-secondary dark:text-dark-text-secondary mb-6;
	}

	/* Activity list styling */
	.activity-list {
		@apply space-y-3;
	}

	.activity-item {
		@apply flex items-start gap-3 p-3 rounded-lg;
		@apply hover:bg-light-bg-hover dark:hover:bg-dark-bg-hover;
		@apply transition-colors duration-150;
	}
}

/* View Transitions API for smooth theme switching */
::view-transition-old(root),
::view-transition-new(root) {
	animation-duration: 0.5s;
	animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

::view-transition-old(root) {
	animation-name: theme-fade-out;
}

::view-transition-new(root) {
	animation-name: theme-fade-in;
}

@keyframes theme-fade-out {
	from {
		opacity: 1;
	}
	to {
		opacity: 0;
	}
}

@keyframes theme-fade-in {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}

	::view-transition-old(root),
	::view-transition-new(root) {
		animation-duration: 0.01ms !important;
	}
}

/* Screen reader only utility */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border-width: 0;
}

.focus\:not-sr-only:focus {
	position: static;
	width: auto;
	height: auto;
	padding: inherit;
	margin: inherit;
	overflow: visible;
	clip: auto;
	white-space: normal;
}

/* Search-specific styles */
.search-highlight {
	@apply bg-yellow-200 dark:bg-yellow-600/40;
	@apply font-medium px-1 rounded;
	@apply text-yellow-900 dark:text-yellow-100;
}

/* Dialog/Modal backdrop */
.dialog-backdrop {
	@apply bg-black/75;
}

/* Tab navigation */
.tab {
	@apply px-4 py-2 border-b-[3px] border-transparent;
	@apply text-light-text-secondary dark:text-dark-text-secondary;
	@apply hover:text-light-text-primary dark:hover:text-dark-text-primary;
	@apply hover:border-light-border-primary dark:hover:border-dark-border-primary;
	@apply transition-all duration-200;
}

.tab-active {
	@apply border-accent-primary text-accent-primary;
	@apply font-medium;
}

/* Loading spinner */
.spinner {
	@apply animate-spin rounded-full border-4 border-light-border-primary dark:border-dark-border-primary;
	@apply border-t-accent-primary;
}

/* Toast notification */
.toast {
	@apply fixed bottom-4 right-4 z-50;
	@apply bg-light-bg-secondary dark:bg-dark-bg-secondary;
	@apply border border-light-border-primary dark:border-dark-border-primary;
	@apply rounded-lg p-4 shadow-lg;
	@apply animate-slide-up;
	@apply max-w-md;
}

.toast-success {
	@apply border-l-4 border-l-success;
}

.toast-error {
	@apply border-l-4 border-l-error;
}

.toast-info {
	@apply border-l-4 border-l-info;
}

.toast-warning {
	@apply border-l-4 border-l-warning;
}

.line-clamp-2 {
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.line-clamp-3 {
	display: -webkit-box;
	-webkit-line-clamp: 3;
	-webkit-box-orient: vertical;
	overflow: hidden;
}
